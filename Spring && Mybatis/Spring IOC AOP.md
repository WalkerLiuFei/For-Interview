## IOC && AOP



## IOC   

### IOC的优势

**IOC，控制反转（Inversion Of Control），是典型的工厂模式，依赖倒置原则的实现**  。 要了解**控制反转( Inversion of Control )**, 我觉得有必要先了解软件设计的一个重要思想：**依赖倒置原则（Dependency Inversion Principle ）**。

**依赖倒置原则 ：** 

依赖导致的原则，就是**先设计大的框架，然后在大的框架之上丰富细节的设计的。因为按照一般的软件设计来说，大的框架是不会变的，变的只是细节**。而相反的，如果先设计细节，再从各种细节上面组装出一个大的框架，这样会使得整个系统不好维护。比如说，在设计汽车时，先设计轮胎然后再在轮胎的基础上设计整个车身，如果这个时候需求变了，轮胎要换个尺寸，这样可能会牵一发动全身。**降低组件之间的耦合，这是依赖注入的一大优势**

**控制反转：** 

  就是依赖倒置原则的一种代码设计的思路。具体采用的方法就是所谓的**依赖注入（Dependency Injection）**。说穿了，这几种概念的关系大概如下：

![img](https://pic1.zhimg.com/80/v2-ee924f8693cff51785ad6637ac5b21c1_hd.jpg) 

**所谓依赖注入，就是把底层类作为参数传入上层类，实现上层类对下层类的“控制**”。像上面`依赖倒置原则` 那样，通过上层设计控制下层设计，只有这样在进行一些小的细节改动时就可以只改细节而不动全身。

### IOC的实现



## AOP 

### AOP的优势

AOP (面向切面编程)，作为OOP的补充，通过AOP可以实现声明式的事务，权限拦截等等，另外可以将相同功能的代码抽象出来构成代码重用。

### AOP的实现

如果目标类没有实现接口，那么Spring AOP会选择使用CGLIB来动态代理目标类。CGLIB（Code Generation Library），是一个代码生成的类库，可以在运行时动态的生成某个类的子类，**因此如果某个类被标记为`final`，那么它是无法使用CGLIB做动态代理的。** 同样的因为是通过继承实现的，所以CGLIB也可以实现对接口的代理。

