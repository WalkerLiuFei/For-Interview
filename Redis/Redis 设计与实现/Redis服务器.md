# 服务器

服务器是单线程的， 所有的任务其实都是定期任务，记好这个就可以了

## ServerCon 函数

`ServerCon` 函数默认每100ms 执行一次，它的工作主要包括更新服务器状态信息，处理服务器接收的`SIGTERM`信号等。

Redis服务器中的`serverCron`函数默认没隔100毫秒执行一次，这个函数负责管理服务器资源，并保持服务器自身的良好运转

每个对象都有一个`L`

`LRU` 时钟，保存了对象最后一次被访问的时间，在内存紧张时，优先`remove ` 长时间未访问的对象。

`ServerCon`函数默认会以每10秒一次的频率更新`LRUclock`属性的值，因为这个时钟不是实时的。所以根据这个属性计算出来的LRU时间实际上只是一个模糊的估算值。



服务器从启动到能够处理客户端的命令请求需要执行以下步奏：

1. 初始化服务器状态
2. 载入服务器配置
3. 初始化服务器数据结构
4. 还原数据库状态
5. 执行事件循环

