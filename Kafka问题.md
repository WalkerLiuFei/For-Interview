# Kafka问题

1. Kafka怎么保证消息顺序性
2. 为什么选择Kafka?
3. Kafka `High Level API` 和`Low Level API`的区别

1. Zookeeper在 Kakfa集群中扮演的角色，broker 哪？

2. Kafka为什么可以保证消息不丢失 ？

3. Kafka为什么可以以O(1)的时间复杂度进行持久化 ？

4. 高吞吐率。即使在非常廉价的商用机器上也能做到单机支持每秒 100K 条以上消息的传输 ? 

5. Redis 作为消息中间件和`Kafka`的区别在哪里？ 为什么？从两者的实现上进行分析说明

6. Kafka 相对于 `ZeroMQ`，`ActiveMQ`,`RabbitMQ`的区别 ？各有什么特点？为什么选择了`Kafka `？

7. Scale out：支持在线水平扩展是怎么进行的 ？ 通过`Partition`进行水平扩展后的代价是什么？

8. 为什么顺序写磁盘的效率会更高? `Kafka`是怎么保证顺序写磁盘的?

9. `Kafka`的已消费的,持久化的log是怎么处理的？如果长时间未消费怎么办？

10. `Kafka`中的索引文件

11. `Kafka`中的两阶段提交和事务

12. Kafka的用途有哪些？使用场景如何？

13. Kafka中的ISR、AR又代表什么？ISR的伸缩又指什么

    

14. Kafka中的HW、LEO、LSO、LW等分别代表什么？

15. Kafka中是怎么体现消息顺序性的？

16. Kafka中的分区器、序列化器、拦截器是否了解？它们之间的处理顺序是什么？

17. Kafka生产者客户端的整体结构是什么样子的？

18. Kafka生产者客户端中使用了几个线程来处理？分别是什么？

19. Kafka的旧版Scala的消费者客户端的设计有什么缺陷？

20. “消费组中的消费者个数如果超过topic的分区，那么就会有消费者消费不到数据”这句话是否正确？如果不正确，那么有没有什么hack的手段？

21. 消费者提交消费位移时提交的是当前消费到的最新消息的offset还是offset+1?

22. 有哪些情形会造成重复消费？

23. 那些情景下会造成消息漏消费？

24. Kafka Consumer是非线程安全的，那么怎么样实现多线程消费？

25. 简述消费者与消费组之间的关系

26. 当你使用kafka-topics.sh创建（删除）了一个topic之后，Kafka背后会执行什么逻辑？

27. topic的分区数可不可以增加？如果可以怎么增加？如果不可以，那又是为什么？

28. topic的分区数可不可以减少？如果可以怎么减少？如果不可以，那又是为什么？

29. 创建topic时如何选择合适的分区数？

30. Kafka目前有那些内部topic，它们都有什么特征？各自的作用又是什么？

31. 优先副本是什么？它有什么特殊的作用？

32. Kafka有哪几处地方有分区分配的概念？简述大致的过程及原理

33. 简述Kafka的日志目录结构

34. Kafka中有那些索引文件？

35. 如果我指定了一个offset，Kafka怎么查找到对应的消息？

36. 如果我指定了一个timestamp，Kafka怎么查找到对应的消息？

37. 聊一聊你对Kafka的Log Retention的理解

38. 聊一聊你对Kafka的Log Compaction的理解

39. 聊一聊你对Kafka底层存储的理解（页缓存、内核层、块层、设备层）

40. 聊一聊Kafka的延时操作的原理

41. 聊一聊Kafka控制器的作用

42. 消费再均衡的原理是什么？（提示：消费者协调器和消费组协调器）

43. Kafka中的幂等是怎么实现的

44. Kafka中的事务是怎么实现的（这题我去面试6加被问4次，照着答案念也要念十几分钟，面试官简直凑不要脸。实在记不住的话...只要简历上不写精通Kafka一般不会问到，我简历上写的是“熟悉Kafka，了解RabbitMQ....”）

45. Kafka中有那些地方需要选举？这些地方的选举策略又有哪些？

46. 失效副本是指什么？有那些应对措施？

47. 多副本下，各个副本中的HW和LEO的演变过程

48. 为什么Kafka不支持读写分离？

49. Kafka在可靠性方面做了哪些改进？（HW, LeaderEpoch）

50. Kafka中怎么实现死信队列和重试队列？

51. Kafka中的延迟队列怎么实现（这题被问的比事务那题还要多！！！听说你会Kafka，那你说说延迟队列怎么实现？）

52. Kafka中怎么做消息审计？

53. Kafka中怎么做消息轨迹？

54. Kafka中有那些配置参数比较有意思？聊一聊你的看法

55. Kafka中有那些命名比较有意思？聊一聊你的看法

56. Kafka有哪些指标需要着重关注？

57. 怎么计算Lag？(注意read_uncommitted和read_committed状态下的不同)

58. Kafka的那些设计让它有如此高的性能？

59. Kafka有什么优缺点？

60. 还用过什么同质类的其它产品，与Kafka相比有什么优缺点？

61. 在使用Kafka的过程中遇到过什么困难？怎么解决的？

62. 怎么样才能确保Kafka极大程度上的可靠性？

63. 聊一聊你对Kafka生态的理解

    
    
