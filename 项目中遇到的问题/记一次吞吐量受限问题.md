# 记一次吞吐量受限问题

## 问题描述

目前应用的吞吐量大概维持在Redis读写 40000QPS左右，远远达不到Redis的benchmark最大限。

目前将问题限制出现归咎于应用端的高CPU占比。视乎我的应用总是占了很高的CPU。

## 问题描述（二）

程序运行一段时间后，莫名其妙的停了好几分钟。

1. 怀疑是 redis cluster reload 的问题，但是感觉好像不是，因为每分钟都会reload，只有部分会出现这种情况 
   1. worker-2 中的 ‘11月 19 号 15:30’分
   2. 应该是  `redis cluster reload` 的问题了
2. 怀疑是GC问题，但是感觉GC不可能停那么久啊。。。。
3. 更新矿机状态占用了大量资源，这个需要大力优化下！

## 尝试解决

1. 通过加大生产者和消费者之间的buffer，暂时解决了一部分问题，但是 Redis Client reload 时暂停请求依旧存在...
2. 可以尝试手动进行Reload操作，但是这样真的有效，手动进行reload 不一样会导致Redis Client无法使用？
3. ==什么逻辑导致的Redis Client在reload时不能使用的?==

